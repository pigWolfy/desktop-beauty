<template>
  <div class="settings-view">
    <h1 class="page-title">è®¾ç½® âš™ï¸</h1>

    <!-- é€šç”¨è®¾ç½® -->
    <div class="settings-section">
      <h3 class="section-title">ğŸ”§ é€šç”¨è®¾ç½®</h3>
      <div class="settings-card card">
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">å¼€æœºè‡ªå¯åŠ¨</span>
            <span class="setting-desc">ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ Desktop Beauty</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.autoStart">
            <span class="slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">æœ€å°åŒ–åˆ°æ‰˜ç›˜</span>
            <span class="setting-desc">å…³é—­çª—å£æ—¶æœ€å°åŒ–åˆ°ç³»ç»Ÿæ‰˜ç›˜</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.minimizeToTray">
            <span class="slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">å¯åŠ¨æ—¶éšè—çª—å£</span>
            <span class="setting-desc">ç¨‹åºå¯åŠ¨åç›´æ¥æœ€å°åŒ–åˆ°æ‰˜ç›˜</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.startMinimized">
            <span class="slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">æ¡Œé¢å°ç»„ä»¶</span>
            <span class="setting-desc">åœ¨æ¡Œé¢ä¸Šæ˜¾ç¤ºå¿«æ·æ“ä½œå°ç»„ä»¶</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.showWidget">
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- å¿«æ·é”®è®¾ç½® -->
    <div class="settings-section mt-lg">
      <h3 class="section-title">âŒ¨ï¸ å¿«æ·é”®</h3>
      <div class="settings-card card">
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">æ˜¾ç¤º/éšè—ä¸»çª—å£</span>
            <span class="setting-desc">å¿«é€Ÿåˆ‡æ¢ä¸»çª—å£çš„æ˜¾ç¤ºçŠ¶æ€</span>
          </div>
          <kbd class="shortcut-key">Alt + D</kbd>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">å¿«æ·å¯åŠ¨å™¨</span>
            <span class="setting-desc">æ‰“å¼€åº”ç”¨å¿«æ·å¯åŠ¨å™¨</span>
          </div>
          <kbd class="shortcut-key">Alt + Space</kbd>
        </div>
      </div>
    </div>

    <!-- æ¡Œé¢ç®¡ç†è®¾ç½® -->
    <div class="settings-section mt-lg">
      <h3 class="section-title">ğŸ–¥ï¸ æ¡Œé¢ç®¡ç†</h3>
      <div class="settings-card card">
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">é»˜è®¤æ’åºæ–¹å¼</span>
            <span class="setting-desc">æ•´ç†æ¡Œé¢æ—¶çš„é»˜è®¤æ’åºè§„åˆ™</span>
          </div>
          <select v-model="settings.defaultSort" class="select-box">
            <option value="name">æŒ‰åç§°</option>
            <option value="type">æŒ‰ç±»å‹</option>
            <option value="date">æŒ‰æ—¥æœŸ</option>
            <option value="size">æŒ‰å¤§å°</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">è‡ªåŠ¨åˆ†ç»„</span>
            <span class="setting-desc">æ•´ç†æ—¶è‡ªåŠ¨æŒ‰ç±»å‹åˆ›å»ºæ–‡ä»¶å¤¹</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.autoGroup">
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- å£çº¸è®¾ç½® -->
    <div class="settings-section mt-lg">
      <h3 class="section-title">ğŸ–¼ï¸ å£çº¸è®¾ç½®</h3>
      <div class="settings-card card">
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">è‡ªåŠ¨è½®æ¢</span>
            <span class="setting-desc">è‡ªåŠ¨åˆ‡æ¢å£çº¸</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.wallpaperSlideshow">
            <span class="slider"></span>
          </label>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">è½®æ¢é—´éš”</span>
            <span class="setting-desc">è‡ªåŠ¨åˆ‡æ¢å£çº¸çš„æ—¶é—´é—´éš”</span>
          </div>
          <select v-model="settings.wallpaperInterval" class="select-box" :disabled="!settings.wallpaperSlideshow">
            <option :value="5">5 åˆ†é’Ÿ</option>
            <option :value="15">15 åˆ†é’Ÿ</option>
            <option :value="30">30 åˆ†é’Ÿ</option>
            <option :value="60">1 å°æ—¶</option>
            <option :value="120">2 å°æ—¶</option>
          </select>
        </div>
      </div>
    </div>

    <!-- ç›‘æ§è®¾ç½® -->
    <div class="settings-section mt-lg">
      <h3 class="section-title">ğŸ“Š ç³»ç»Ÿç›‘æ§</h3>
      <div class="settings-card card">
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">åˆ·æ–°é—´éš”</span>
            <span class="setting-desc">ç³»ç»Ÿç›‘æ§æ•°æ®çš„åˆ·æ–°é¢‘ç‡</span>
          </div>
          <select v-model="settings.monitorInterval" class="select-box">
            <option :value="1000">1 ç§’</option>
            <option :value="2000">2 ç§’</option>
            <option :value="5000">5 ç§’</option>
          </select>
        </div>

        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">ä¾§è¾¹æ æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€</span>
            <span class="setting-desc">åœ¨ä¾§è¾¹æ åº•éƒ¨æ˜¾ç¤º CPU å’Œå†…å­˜ä½¿ç”¨ç‡</span>
          </div>
          <label class="switch">
            <input type="checkbox" v-model="settings.showSidebarStats">
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>

    <!-- å…³äº -->
    <div class="settings-section mt-lg">
      <h3 class="section-title">â„¹ï¸ å…³äº</h3>
      <div class="about-card card">
        <div class="about-logo">âœ¨</div>
        <h2>Desktop Beauty</h2>
        <p class="version">ç‰ˆæœ¬ 1.0.0</p>
        <p class="desc">ä¸€ä¸ªä¼˜é›…çš„æ¡Œé¢ç®¡ç†å·¥å…·</p>
        <div class="developer-info">
          <p>å¼€å‘è€…ï¼š<a href="#" @click.prevent="openAuthorGithub">pigWolfy</a></p>
          <p>é‚®ç®±ï¼šhappywangruifei@gmail.com</p>
        </div>
        <div class="about-links">
          <a href="#" @click.prevent="openGithub">GitHub</a>
          <span>Â·</span>
          <a href="#" @click.prevent="openFeedback">åé¦ˆé—®é¢˜</a>
        </div>
        <p class="copyright">Â© 2024 Desktop Beauty Team</p>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from 'vue'
import { useSettingsStore } from '../stores/settings'
import { storeToRefs } from 'pinia'

const settingsStore = useSettingsStore()
const { settings } = storeToRefs(settingsStore)

onMounted(() => {
  settingsStore.init()
})

const openGithub = () => {
  window.electronAPI?.openExternal('https://github.com/pigWolfy/desktop-beauty')
}

const openFeedback = () => {
  window.electronAPI?.openExternal('https://github.com/pigWolfy/desktop-beauty/issues')
}

const openAuthorGithub = () => {
  window.electronAPI?.openExternal('https://github.com/pigWolfy')
}
</script>

<style lang="scss" scoped>
.settings-view {
  animation: fadeIn 0.3s ease;
  max-width: 800px;
}

.settings-card {
  padding: 0;
  overflow: hidden;
}

.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid $border-color;

  &:last-child {
    border-bottom: none;
  }

  .setting-info {
    display: flex;
    flex-direction: column;
    gap: 4px;

    .setting-label {
      font-weight: 500;
    }

    .setting-desc {
      font-size: 12px;
      color: $text-muted;
    }
  }
}

.switch {
  position: relative;
  width: 48px;
  height: 24px;
  flex-shrink: 0;

  input {
    opacity: 0;
    width: 0;
    height: 0;

    &:checked + .slider {
      background: $accent-primary;

      &::before {
        transform: translateX(24px);
      }
    }
  }

  .slider {
    position: absolute;
    cursor: pointer;
    inset: 0;
    background: $bg-secondary;
    border-radius: 24px;
    transition: all $transition-fast;

    &::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      left: 2px;
      bottom: 2px;
      background: white;
      border-radius: 50%;
      transition: all $transition-fast;
    }
  }
}

.select-box {
  padding: 8px 12px;
  background: $bg-secondary;
  color: $text-primary;
  border: 1px solid $border-color;
  border-radius: $border-radius-sm;
  cursor: pointer;
  min-width: 120px;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  &:focus {
    outline: none;
    border-color: $accent-primary;
  }
}

.shortcut-key {
  padding: 6px 12px;
  background: $bg-secondary;
  border: 1px solid $border-color;
  border-radius: 6px;
  font-family: monospace;
  font-size: 13px;
}

.about-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  padding: 40px;

  .about-logo {
    font-size: 64px;
    margin-bottom: 16px;
  }

  h2 {
    font-size: 24px;
    font-weight: 600;
    background: $accent-gradient;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .version {
    font-size: 14px;
    color: $text-muted;
    margin-top: 8px;
  }

  .desc {
    font-size: 14px;
    color: $text-secondary;
    margin-top: 4px;
  }

  .developer-info {
    margin-top: 16px;
    font-size: 14px;
    color: $text-secondary;
    
    p {
      margin: 4px 0;
    }

    a {
      color: $accent-primary;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }

  .about-links {
    display: flex;
    gap: 12px;
    margin-top: 24px;

    a {
      color: $accent-primary;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }

    span {
      color: $text-muted;
    }
  }

  .copyright {
    font-size: 12px;
    color: $text-muted;
    margin-top: 24px;
  }
}
</style>
